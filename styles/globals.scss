@use "variables";
@use "reset";
@use "animations";

// Album art sizing — 144px (1.5 inches at 96 DPI)
.album-art-size {
  width: 144px;
  height: 144px;
}

// Larger album art for flipped card back — 216px (1.5× standard)
.album-art-size-lg {
  width: 216px;
  height: 216px;
}

// Flip card animation styles.
// These must remain global: RecordCard applies them as plain className strings
// because the flip state drives JS-side class toggling.
.flip-card {
  perspective: 1500px;
  width: 180px;
  position: relative;
  z-index: 1;
  transition: transform 0.4s ease, width 0.4s ease, margin 0.4s ease;

  &:hover:not(.flipped) {
    transform: translateY(-2px);
  }

  // When flipped, bring to front with 3D effect.
  // NOTE: filter must be on the outer container, NOT on flip-card-inner.
  // filter on an element with transform-style: preserve-3d flattens 3D transforms,
  // breaking backface-visibility and the entire flip mechanism.
  &.flipped {
    z-index: 1000;
    width: 250px;
    // margin-left/right set dynamically by RecordCard JS to stay within viewport
    filter:
      drop-shadow(0 8px 16px rgba(0, 0, 0, 0.25))
      drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
  }
}

.flip-card-inner {
  position: relative;
  width: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;

  .flip-card.flipped & {
    transform: rotateY(180deg);
  }
}

.flip-card-front,
.flip-card-back {
  width: 100%;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  -moz-backface-visibility: hidden;
  background-color: var(--warm-bg-primary);
}

// Front face: position relative so it sets container height naturally.
.flip-card-front {
  position: relative;
  transform: rotateY(0deg);
  border: 1px solid var(--warm-bg-tertiary);
  border-radius: 0;
  box-shadow: 0 1px 3px rgba(62, 92, 47, 0.08);
}

// Back face: absolute so it overlays the front.
.flip-card-back {
  position: absolute;
  top: 0;
  left: 0;
  transform: rotateY(180deg);
  background-color: var(--warm-bg-secondary);
  border: 2px solid #8BA87A; // warm sage border
  border-radius: 0;
}
